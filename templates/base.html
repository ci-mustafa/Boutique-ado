{% load static %}

<!doctype html>
<html lang="en">

<head>

  {% block meta %}
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  {% endblock %}

  {% block extra_meta %}
  {% endblock %}

  {% block corecss %}
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link
    href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/base.css' %}">
  {% endblock %}

  {% block extra_css %}
  {% endblock %}

  {% block corejs %}
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/fd7875ea58.js" crossorigin="anonymous"></script>
  {% endblock %}

  {% block extra_js %}
  {% endblock %}

  <title>Boutique Ado {% block extra_title %}{% endblock %}</title>
</head>

<body>
  <header class="container-fluid fixed-top">
    <!-- 'container-fluid': Creates a full-width container that spans the entire viewport width -->
    <!-- 'fixed-top': Positions the header at the top of the page and keeps it fixed during scrolling -->
    <div id="topnav" class="row bg-white pt-lg-2 d-none d-lg-flex">
      <!-- 'row': Creates a horizontal group of columns -->
      <!-- 'bg-white': Sets the background color to white using Bootstrap's background utility class. -->

      <!-- 'pt-lg-2': Applies padding-top (pt) of size 2, but only on large screens (lg) or wider. 
         For smaller screens, there will be no padding-top applied. -->

      <!-- 'd-none': Hides the element completely on all screen sizes. -->

      <!-- 'd-lg-flex': Overrides 'd-none' on large screens (lg) and wider, displaying the element as a flex container. 
         Ensures this navigation bar is only visible on larger screens and hidden on smaller ones. -->

      <!-- First Column -->
      <div class="col-12 col-lg-4 my-auto py-1 py-lg-0 text-center text-lg-left">
        <!-- 'col-12': On small screens, the column spans 12/12 grid columns (full width) -->
        <!-- 'col-lg-4': On large screens and above, the column spans 4/12 grid columns -->
        <!-- 'my-auto': Vertically centers the content by applying auto margins on top and bottom -->
        <!-- 'py-1': Adds small vertical padding (spacing unit 1) -->
        <!-- 'py-lg-0': Removes vertical padding on large screens -->
        <!-- 'text-center': Aligns text to the center on small screens -->
        <!-- 'text-lg-left': Aligns text to the left on large screens -->
        <a href="{% url 'home' %}" class="nav-link main-logo-link">
          <!-- 'nav-link': Applies default Bootstrap navigation link styling -->
          <h1 class="logo-font text-black my-0"><strong>Boutique Ado</strong></h1>
          <!-- 'logo-font': Custom class for the logo's font styling -->
          <!-- 'text-black': Sets the text color to black -->
          <!-- 'my-0': Removes margin from top and bottom -->
        </a>
      </div>

      <!-- Second Column (Search Bar) -->
      <div class="col-12 col-lg-4 my-auto py-1 py-lg-0">
        <form method="GET" action="{% url 'all-products' %}">
          <div class="input-group w-100">
            <!-- 'input-group': Groups form elements together for styling -->
            <!-- 'w-100': Makes the input group take up the full width -->
            <input type="text" class="form-control border border-black rounded-0" name="q"
              placeholder="Search Our Site">
            <!-- 'form-control': Styles the input field with Bootstrap's default styling -->
            <!-- 'border': Adds a border around the input field -->
            <!-- 'border-black': Sets the border color to black -->
            <!-- 'rounded-0': Removes border radius for sharp edges -->
            <div class="input-group-append">
              <!-- 'input-group-append': Adds an additional element (button) to the end of the input group -->
              <button class="form-control btn btn-black border border-black rounded-0" type="submit">
                <!-- 'form-control': Ensures the button aligns with the input field -->
                <!-- 'btn': Applies default Bootstrap button styling -->
                <!-- 'btn-black': Custom class for button color (black) -->
                <!-- 'border': Adds a border to the button -->
                <!-- 'border-black': Sets the button's border color to black -->
                <!-- 'rounded-0': Removes border radius for a sharp look -->
                <span class="icon">
                  <i class="fas fa-search"></i>
                  <!-- Font Awesome icon for a search magnifying glass -->
                </span>
              </button>
            </div>
          </div>
        </form>
      </div>

      <!-- Third Column (Icons/Dropdown Menu) -->
      <div class="col-12 col-lg-4 my-auto py-1 py-lg-0">
        <ul class="list-inline list-unstyled text-center text-lg-right my-0">
          <!-- 'list-inline': Styles the list items horizontally in a single line -->
          <!-- 'list-unstyled': Removes default list styling (bullets) -->
          <!-- 'text-center': Centers text on small screens -->
          <!-- 'text-lg-right': Right-aligns text on large screens -->
          <!-- 'my-0': Removes margin from the top and bottom -->
          <li class="list-inline-item dropdown">
            <!-- 'list-inline-item': Displays this list item inline with others -->
            <!-- 'dropdown': Indicates this item has a dropdown menu -->

            <a class="text-black nav-link" href="#" id="user-options" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">
              <!-- 'text-black': Sets the text color to black -->
              <!-- 'nav-link': Applies default Bootstrap navigation link styling -->
              <!-- 'href="#"': Placeholder link -->
              <!-- 'id="user-options"': Unique ID to associate the dropdown menu with this link -->
              <!-- 'data-toggle="dropdown"': Enables Bootstrap dropdown functionality -->
              <!-- 'aria-haspopup="true"': Indicates the dropdown is a menu -->
              <!-- 'aria-expanded="false"': Indicates the dropdown is initially collapsed -->

              <div class="text-center">
                <!-- 'text-center': Centers the content horizontally -->
                <div><i class="fas fa-user fa-lg"></i></div>
                <!-- 'fas fa-user': Font Awesome user icon -->
                <!-- 'fa-lg': Makes the icon larger -->
                <p class="my-0">My Account</p>
                <!-- 'my-0': Removes vertical margin from the paragraph -->
              </div>
            </a>

            <div class="dropdown-menu border-0" aria-labelledby="user-options">
              <!-- 'dropdown-menu': Styles the dropdown menu -->
              <!-- 'border-0': Removes the border from the dropdown -->
              <!-- 'aria-labelledby="user-options"': Associates this menu with the anchor tag via the ID -->

              {% if request.user.is_authenticated %}
              <!-- Checks if the user is logged in -->
              {% if request.user.is_superuser %}
              <!-- Checks if the logged-in user is a superuser -->
              <a href="" class="dropdown-item">Product Management</a>
              <!-- 'dropdown-item': Styles the link as a dropdown menu item -->
              {% endif %}
              <a href="" class="dropdown-item">My Profile</a>
              <!-- Option for authenticated users to view their profile -->
              <a href="{% url 'account_logout' %}" class="dropdown-item">Logout</a>
              <!-- Logout link for authenticated users -->
              {% else %}
              <!-- If the user is not logged in -->
              <a href="{% url 'account_signup' %}" class="dropdown-item">Register</a>
              <!-- Registration link for unauthenticated users -->
              <a href="{% url 'account_login' %}" class="dropdown-item">Login</a>
              <!-- Login link for unauthenticated users -->
              {% endif %}
            </div>
          </li>

          <li class="list-inline-item">
            <!-- Another inline list item -->

            <a class="{% if grand_total %}text-info font-weight-bold{% else %}text-black{% endif %} nav-link"
              href="{% url 'view_bag' %}">
              <!-- Dynamic class:
                     - 'text-info font-weight-bold': If `grand_total` exists, text is styled as blue and bold.
                     - 'text-black': If `grand_total` doesn't exist, text is styled as black.
                     - 'nav-link': Applies Bootstrap navigation link styling.
                -->
              <div class="text-center">
                <!-- Centers the content horizontally -->
                <div><i class="fas fa-shopping-bag fa-lg"></i></div>
                <!-- 'fas fa-shopping-bag': Font Awesome shopping bag icon -->
                <!-- 'fa-lg': Enlarges the icon -->
                <p class="my-0">
                  {% if grand_total %}
                  <!-- If a grand total exists, display it formatted to two decimal places -->
                  ${{ grand_total|floatformat:2 }}
                  {% else %}
                  <!-- If no grand total exists, display $0.00 -->
                  $0.00
                  {% endif %}
                </p>
              </div>
            </a>
          </li>

        </ul>
      </div>
    </div>
    <div class="row bg-white">
      <!-- "row": Creates a horizontal row container (Bootstrap grid system).
           "bg-white": Applies a white background color to the row. -->
      <nav class="navbar navbar-expand-lg navbar-light w-100">
        <!-- "navbar": Defines a Bootstrap navigation bar.
             "navbar-expand-lg": Makes the navbar responsive, expanding on large screens and collapsing on smaller ones.
             "navbar-light": Styles the navbar with light background and dark text.
             "w-100": Sets the navbar width to 100% to span the entire row. -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-nav"
          aria-controls="main-nav" aria-expanded="false" aria-label="Toggle navigation">
          <!-- "navbar-toggler": Styles the button for toggling the collapsed navbar on small screens.
               "type='button'": Indicates this is a button element.
               "data-toggle='collapse'": Enables Bootstrap's collapse functionality.
               "data-target='#main-nav'": Specifies the target element (ID "main-nav") that this button toggles.
               "aria-controls": Improves accessibility by indicating the controlled element.
               "aria-expanded": Provides the initial expanded/collapsed state for screen readers.
               "aria-label": Describes the purpose of the button for accessibility. -->
          <span class="navbar-toggler-icon"></span>
          <!-- "navbar-toggler-icon": A built-in Bootstrap class for the icon that indicates toggle functionality. -->
        </button>
        {% include 'includes/mobile-top-header.html' %}
        <!-- Includes the mobile top header (likely a file with additional navigation or content for mobile views). -->
        {% include 'includes/main-nav.html' %}
        <!-- Includes the main navigation menu (likely a file containing the primary navigation structure). -->
      </nav>
    </div>

    <div id="delivery-banner" class="row text-center">
      <!-- "row": Creates a horizontal container for the banner.
           "text-center": Centers the text inside the banner horizontally. -->
      <div class="col bg-black text-white">
        <!-- "col": Defines a single column spanning the entire row (default grid behavior).
             "bg-black": Applies a black background color.
             "text-white": Sets the text color to white for contrast. -->
        <h4 class="logo-font my-1">
          <!-- "logo-font": Likely a custom class for styling the font.
               "my-1": Adds small vertical margins (top and bottom) to the heading. -->
          Free delivery on orders over ${{ free_delivery_threshold }}!
        </h4>
      </div>
    </div>

  </header>


  {% if messages %}
  <!-- 40 is for error, 30 is for warning, 25 is for success message -->
  <div class="message-container">
    {% for message in messages %}
    {% with message.level as level %}
    {% if level == 40 %}
    {% include 'includes/toasts/toast_error.html' %}
    {% elif level == 30 %}
    {% include 'includes/toasts/toast_warning.html' %}
    {% elif level == 25 %}
    {% include 'includes/toasts/toast_success.html' %}
    {% else %}
    {% include 'includes/toasts/toast_info.html' %}
    {% endif %}
    {% endwith %}
    {% endfor %}
  </div>
  {% endif %}

  {% block page_header %}
  {% endblock %}

  {% block content %}
  {% endblock %}

  {% block postloadjs %}
  <script type="text/javascript">
    // Select all elements with the class "toast" and trigger their display
    // using the Bootstrap Toast component's 'show' method.
    // This ensures that any toast notifications are displayed automatically
    // when the page loads or when this script is executed.
    $(".toast").toast('show');
  </script>

  {% endblock %}
</body>

</html>